Infrastructure is "sample"
Provider is load ".env"
EmailSendTo is "email@example.com"
monitoring is CPUUtilization
scale_up_factor is 60
scale_down_factor is 20
scale_trashold is 20
subnet_ips is list of "172.16.11.0/24", "172.16.12.0/24", "172.16.13.0/24"
security_groups_config is load "security_group.json"
intance_configuration_type_1 is load "instance_configuration_type1.json"
intance_configuration_type_2 is load "instance_configuration_type2.json"
CPUUsageWarning is load "cpu_usage_warning.html"
f: AutoScaleBuilder as autoscaling_type1 needs InstanceConfigurationType with
    Name as type1 and
    Size as list of 1, 2, 5 and
    SubnetIPS as subnet_ips and
    Monitoring as monitoring and
    ScaleFactor as list of scale_up_factor, scale_down_factor
end
START BUILD
for each subnet_ip in subnet_ips perform SubnetBuilder with SubnetIp as subnet_ip
for each security_group in security_groups_config perform SecurityGroupBuilder with SecurityGroupConfig as security_group
perform InstanceBuilder with use intance_configuration_type_2
perform autoscaling_type1 with use intance_configuration_type_1
on find CPUUtilization of find name of intance_configuration_type_2 gt scale_up_factor + scale_trashold perform EmailSender with Template as CPUUsageWarning and Subject as "Type 2 - CPU Usage Warning"
END BUILD